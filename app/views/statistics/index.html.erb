<h1><%= t("label.statistics.title.#{params[:length]}") %></h1>

<%= render :partial => "statistics/menu" %>

<% cache_with_timeout(nil, 2.hours) do %>
<% fetch_statistics %>

<h2><%= t('label.statistics.title.total_visitors', :count => @total_visitors ) %></h2>

<h2><%= t('label.statistics.title.country_statistic') %></h2>
<table class="data">
  <tr>
    <th style="width: 50px">#</th>
    <th><%= t("label.statistics.country") %></th>
    <th style="width: 200px"><%= t("label.statistics.visits") %></th>
  </tr>
  <% @report_country.each_with_index do |l, i| %>
  <tr class="<%= (i % 2 == 0) ? 'even' : 'odd' %>">
    <td><%= i+1 %></td>
    <td><%= l.country %></td>
    <td><%= l.visits %></td>
  </tr>
  <% end %>
</table>

<h2><%= t('label.statistics.title.browser_statistic') %></h2>
<table class="data">
  <tr>
    <th style="width: 50px">#</th>
    <th><%= t("label.statistics.browser") %></th>
    <th style="width: 200px"><%= t("label.statistics.visits") %></th>
  </tr>
  <% @report_browser.each_with_index do |l, i| %>
  <tr class="<%= (i % 2 == 0) ? 'even' : 'odd' %>">
    <td><%= i+1 %></td>
    <td><%= l.browser %></td>
    <td><%= l.visits %></td>
  </tr>
  <% end %>
</table>

<h2><%= t('label.statistics.title.os_statistic') %></h2>
<table class="data">
  <tr>
    <th style="width: 50px">#</th>
    <th><%= t("label.statistics.operating_system") %></th>
    <th style="width: 200px"><%= t("label.statistics.visits") %></th>
  </tr>
  <% @report_os.each_with_index do |l, i| %>
  <tr class="<%= (i % 2 == 0) ? 'even' : 'odd' %>">
    <td><%= i+1 %></td>
    <td><%= l.operating_system %></td>
    <td><%= l.visits %></td>
  </tr>
  <% end %>
</table>
<% end %>
